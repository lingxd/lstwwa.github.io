<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0">
  <title>linux_multitask_2</title>
  <link rel="stylesheet" href="css/standardize.css">
  <link rel="stylesheet" href="css/linux_multitask_2-grid.css">
  <link rel="stylesheet" href="css/linux_multitask_2.css">
</head>
<body class="body page-linux_multitask_2 clearfix">
  <div class="style-1 container bottom container-1">
    <a href="major_linux.html" class="style-1 button liux">返回</a>
    <div class="style-1 element bottom"></div>
  </div>
  <div class="style-1 container tital container-2">
    <p class="style-1 text tital">网络编程</p>
    <div class="style-1 element tital"></div>
  </div>
  <div class="style-1 text main text-2">
    <p><a>关于socket的参数</a></p>
    <p>-</p>
    <p><a>domain</a></p>
    <p>AF_UNIX / AF_LOCAL ：这代表创建本地域套接字。相当于有名管道。不需要IP</p>
    <p>AF_INET / AF_INET6：分别使用 IPv4 和 IPv6</p>
    <p>AF_XXX 等价于 PF_XXX，这意味着每一种网络层 Protocol 都有对应的一种 Address</p>
    <p>-</p>
    <p><a>type</a></p>
    <p>SOCK_STREAM：流式套接字，数据帧不同步</p>
    <p>&nbsp;SOCK_DGRAM：数据报套接字，数据帧同步</p>
    <p>-</p>
    <p><a>protocol</a></p>
    <p>用于指定传输层协议</p>
    <p>只要指定流式套接字，那么默认就是 TCP 协议，protocol赋0即可。&nbsp;</p>
    <p>只要指定数据报套接字，那么默认就是 UDP 协议，protocol赋0即可。&nbsp;</p>
    <p>-</p>
    <p><a>&nbsp;字节序转换</a></p>
    <p>从本地主机到网络：htonl() / htons()&nbsp;</p>
    <p>从网络到本地主机：ntohl() / ntohs()&nbsp;</p>
    <p>h代表host，n代表network</p>
    <p>l代表long（4字节），s代表short（2字节）&nbsp;
</p>
    <p>-</p>
    <p><a>广播与多播（也叫组播）</a>&nbsp;</p>
    <p>只有UDP才有广播与多播&nbsp;</p>
    <p>广播的编码关键：&nbsp;</p>
    <p>发送方：① 使能广播属性；② 发送到广播地址 x.x.x.255</p>
    <p>接收方：无需特殊设定</p>
    <p>多播的编码关键：</p>
    <p>发送方：① 使能广播属性；② 发送到约定的多播组：224.0.0.1 ~ 239.255.255.255&nbsp;</p>
    <p>接收方：加入约定的多播组&nbsp;
</p>
    <p>-</p>
    <p><a>TCP特点</a></p>
    <p>面向连接，相当于打电话</p>
    <p>提供高可靠性通信</p>
    <p>无失序、无重复、无丢失、拥塞控制、半关闭……</p>
    <p>&nbsp;基于效率方面考虑，适用于大量数据的传送&nbsp;</p>
    <p>-</p>
    <p><a>UDP特点</a></p>
    <p>无连接，相当于寄信</p>
    <p>提供不可靠通信</p>
    <p>不对传输的数据做任何重复、丢失、失序等判断</p>
    <p>基于效率考虑，适用于传输小尺寸数据</p>
    <p>基于时效考虑，适用于传输流媒体数据</p>
    <p>-</p>
    <p>安装wireshark</p>
    <p>sudo apt install wireshark&nbsp;</p>
    <p>-</p>
    <p><a>网址结构</a></p>
    <p>协议://主机域名/xx/xx/program?arg1=.... arg2=...</p>
    <p>协议://主机域名/xx/xx/file</p>
    <p>收到的HTTP响应数据: 头部\r\n\r\n正文</p>
    <p>1，选择一个合适的 API</p>
    <p>2，正确连接，并得到服务器的响应</p>
    <p>3，下载cJSON 库，解析服务器返回的数据</p>
    <p>-</p>
    <p><a>关于断点续传作业要注意的地方</a></p>
    <p>DNS查询（即gethostbyname()函数）需要时间，建议提供进度显示来展现当前的网络情况</p>
    <p>连接请求（即connect()函数）需要时间，使用超时控制更合理，做法步骤是：</p>
    <p>将套接字sockfd设置为非阻塞&nbsp;</p>
    <p>若没有立即连接成功，则将sockfd置入写就绪描述符集合中，并使用select做超时监听</p>
    <p>请求资源使用的HTTP报文格式如下：</p>
    <p>-----------------------------------------</p>
    <p>get /path http/</p>
    <p>Hosts:</p>
    <p>Auther:</p>
    <p>.................</p>
    <p>-----------------------------------------</p>
    <p>对下载资源要注意的地方</p>
    <p>以追加方式打开文件</p>
    <p>获取文件已有大小，在HTTP请求报文中的Range字段中加以阐明：&nbsp;</p>
    <p>Range: bytes=a-b&nbsp;</p>
    <p>a为起始字节序号，b为终止字节序号（省略意味着文件末尾）&nbsp;</p>
    <p>HTTP响应报文中，状态码为206为支持部分资源获取&nbsp;</p>
    <p>HTTP响应报文中，状态码为200则不支持部分资源获取，只能重新下载</p>
</div>

  <script src="js/jquery-min.js"></script>
</body>
</html>